{"version":3,"sources":["servicebot.js"],"names":["Object","defineProperty","exports","value","_defaults2","require","_defaults3","_interopRequireDefault","_snoowrap","_snoowrap2","_path","_path2","_config","_config2","obj","__esModule","default","bot","constructor","_ref","arguments","length","undefined","configFile","services","events","resolve","__dirname","config","__initConfig","__initSnooWrap","error","__config","hasMany","reddit","userAgent","get","clientId","clientSecret","refreshToken","Error"],"mappings":"AAAA;;AAEAA,OAAOC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AACzCC,WAAO;AADkC,CAA7C;;AAIA,IAAIC,aAAaC,QAAQ,iBAAR,CAAjB;;AAEA,IAAIC,aAAaC,uBAAuBH,UAAvB,CAAjB;;AAEA,IAAII,YAAYH,QAAQ,UAAR,CAAhB;;AAEA,IAAII,aAAaF,uBAAuBC,SAAvB,CAAjB;;AAEA,IAAIE,QAAQL,QAAQ,MAAR,CAAZ;;AAEA,IAAIM,SAASJ,uBAAuBG,KAAvB,CAAb;;AAEA,IAAIE,UAAUP,QAAQ,UAAR,CAAd;;AAEA,IAAIQ,WAAWN,uBAAuBK,OAAvB,CAAf;;AAEA,SAASL,sBAAT,CAAgCO,GAAhC,EAAqC;AACjC,WAAOA,OAAOA,IAAIC,UAAX,GAAwBD,GAAxB,GAA8B,EAAEE,SAASF,GAAX,EAArC;AACH;;AAED,MAAMG,GAAN,CAAU;;AAEN;;;;;;;AAOAC,kBAAc;AACV,YAAIC,OAAOC,UAAUC,MAAV,GAAmB,CAAnB,IAAwBD,UAAU,CAAV,MAAiBE,SAAzC,GAAqDF,UAAU,CAAV,CAArD,GAAoE,EAA/E;AAAA,YACIG,aAAaJ,KAAKI,UADtB;AAAA,YAEIC,WAAWL,KAAKK,QAFpB;AAAA,YAGIC,SAASN,KAAKM,MAHlB;;AAKA,SAAC,GAAGnB,WAAWU,OAAf,EAAwB,IAAxB,EAA8B;AAC1BO,sBAD0B;AAE1BC,oBAF0B;AAG1BC;AAH0B,SAA9B,EAIG;AACCF,wBAAYZ,OAAOK,OAAP,CAAeU,OAAf,CAAuBC,SAAvB,IAAoC,OADjD;AAECH,sBAAU,EAFX;AAGCC,oBAAQ;AAHT,SAJH;;AAUA,YAAI;AACA,iBAAKG,MAAL,GAAc,EAAd;AACA,iBAAKC,YAAL;AACA,iBAAKC,cAAL;AACH,SAJD,CAIE,OAAOC,KAAP,EAAc;AACZ,kBAAMA,KAAN;AACH;AACJ;;AAEDF,mBAAe;AACX,aAAKG,QAAL,GAAgB,IAAInB,SAASG,OAAb,CAAqB,KAAKO,UAA1B,CAAhB;AACH;;AAEDO,qBAAiB;AACb,YAAI,KAAKE,QAAL,CAAcC,OAAd,CAAsB,CAAC,WAAD,EAAc,UAAd,EAA0B,cAA1B,EAA0C,cAA1C,CAAtB,CAAJ,EAAsF;AAClF,iBAAKC,MAAL,GAAc,IAAIzB,WAAWO,OAAf,CAAuB;AACjCmB,2BAAW,KAAKH,QAAL,CAAcI,GAAd,CAAkB,WAAlB,CADsB;AAEjCC,0BAAU,KAAKL,QAAL,CAAcI,GAAd,CAAkB,UAAlB,CAFuB;AAGjCE,8BAAc,KAAKN,QAAL,CAAcI,GAAd,CAAkB,cAAlB,CAHmB;AAIjCG,8BAAc,KAAKP,QAAL,CAAcI,GAAd,CAAkB,cAAlB;AAJmB,aAAvB,CAAd;AAMH,SAPD,MAOO;AACH,kBAAM,IAAII,KAAJ,CAAU,8BAAV,CAAN;AACH;AACJ;AAjDK;;AAoDVtC,QAAQc,OAAR,GAAkBC,GAAlB;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"servicebot.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _defaults2 = require('lodash/defaults');\n\nvar _defaults3 = _interopRequireDefault(_defaults2);\n\nvar _snoowrap = require('snoowrap');\n\nvar _snoowrap2 = _interopRequireDefault(_snoowrap);\n\nvar _path = require('path');\n\nvar _path2 = _interopRequireDefault(_path);\n\nvar _config = require('./config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\n\nclass bot {\n\n    /**\n     * Build the bot\n     *\n     * @param configFile\n     * @param services\n     * @param events\n     */\n    constructor() {\n        var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n            configFile = _ref.configFile,\n            services = _ref.services,\n            events = _ref.events;\n\n        (0, _defaults3.default)(this, {\n            configFile,\n            services,\n            events\n        }, {\n            configFile: _path2.default.resolve(__dirname) + '/.env',\n            services: {},\n            events: {}\n        });\n\n        try {\n            this.config = {};\n            this.__initConfig();\n            this.__initSnooWrap();\n        } catch (error) {\n            throw error;\n        }\n    }\n\n    __initConfig() {\n        this.__config = new _config2.default(this.configFile);\n    }\n\n    __initSnooWrap() {\n        if (this.__config.hasMany(['userAgent', 'clientId', 'clientSecret', 'refreshToken'])) {\n            this.reddit = new _snoowrap2.default({\n                userAgent: this.__config.get('userAgent'),\n                clientId: this.__config.get('clientId'),\n                clientSecret: this.__config.get('clientSecret'),\n                refreshToken: this.__config.get('refreshToken')\n            });\n        } else {\n            throw new Error('Missing reddit configuration');\n        }\n    }\n}\n\nexports.default = bot;\n//# sourceMappingURL=servicebot.js.map\n//# sourceMappingURL=servicebot.js.map\n//# sourceMappingURL=servicebot.js.map\n//# sourceMappingURL=servicebot.js.map\n//# sourceMappingURL=servicebot.js.map\n//# sourceMappingURL=servicebot.js.map\n//# sourceMappingURL=servicebot.js.map"]}